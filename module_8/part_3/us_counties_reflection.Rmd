---
title: "US Counties"
author: "Amelia Bertozzi-Villa"
date: "February 20, 2017"
output: html_document
---

For obvious reasons, this paper is quite near and dear to my heart, and I know quite a bit about how this analysis was performed. I'm going to go into some detail on the methods to clear up some confusion, then address a few other common theme from the discussion thread. 

## Methods

### Regression Specification
Everyone who responded to the question about predictor and outcome variables for the regression analysis accurately stated that the outcome variable of this analysis was cause-specific mortality rate. But most of you stated that the predictor variable was "county", which is not quite correct. Saying that the predictor variable is "county" is kind of like saying that the predictor variable in our "Salaries" regression is "professor"-- the county isn't a predictor variable, it's our **unit of analysis**. 

In the dataset that we use to run the regression, every row represents a particular county-year-sex-age group. There's a column for county identifier, year, sex, and age that collectively uniquely identify that row as a unit of analysis. There's a column for the mortality rate within that county-year-sex-age group. Then there are columns for all of our *covariates*: the proportion of the adult population who has graduated high school; the proportion of the population that is Hispanic; the proportion of the population that is Black; the proportion of the population that is a race other than Black or white; the proportion of a county that is contained within a state or federal Native American reservation; the median household income; and the population density. **These** are our predictor variables, not county. The results that you see in the maps are what happens when you use this model to predict mortality rates for a new place. 

If we had to write a regression equation for our model, it would look like this:

$$ mortality\_rate = \beta_0 + \beta_1education + \beta_2percent\_Hispanic + \\ \beta_3percent\_Black + \beta_4percent\_white + \beta_5percent\_other +\\ \beta_6percent\_reservation + \beta_7income + \beta_8population\_density + \\ \beta_9year + \beta_10sex + \beta_{11}age + [spatiotemporal\ smoothing] + \varepsilon  $$
<br>
A few things to note about this: 

1. Instead of betas 9-11, we actually use something called a *random effect* on time, sex, and age;
2. The "spatial smoothing" part means that we "look next door" and incorporate some information from neighboring counties and neighboring years into the estimate for any given county-year. This allows us to get better estimates for place with small sample sized and few deaths.

### Raking
There was some confusion expressed about the raking step. Raking was undertaken to deal with two separate but related problems:

1. We ran separate, county-level models for all-cause mortality, cause-specific mortality for the the 3 Level 1 causes (Communicable, Maternal and Neonatal Diseases; Noncommunicable Diseases; and Injuries), and cause-specific mortality for the 21 Level 2 causes. Because all of these models were run separately, when you added deaths for the 3 Level 1 causes together, they didn't precisely add up to all-cause mortality (though they were close). Similarly, if you added up deaths for all children of a Level 1 cause, they wouldn't quite add up to the deaths modeled by that cause. We wanted these death counts to add exactly. 
2. At the same time that we were making these county level estimates, a different group at the same organization was making them on the state level. Because they could incorporate data that wasn't available on the county level, we wanted our death counts on the county level to sum exactly to their counts on the state level. 

Raking, also called "Iterative Proportional Fitting", is how you achieve both of those goals. Basically, you jiggle your results slightly until all the death counts add up the way you want them to. You've changed your numbers a little, but you retain the *relative* values of county level deaths. There's much more information about raking in section 1.4 of the (supplemental materials)[http://jamanetwork.com/journals/jama/fullarticle/2592499?utm_campaign=articlePDF&utm_medium=articlePDFlink&utm_source=articlePDF&utm_content=jama.2016.13645].

### Data, County of Residence, and Underlying Cause of Death
We got our mortality rate information from the US's vital registration system-- every time someone dies, information from their death certificate gets put into this database. So, the dataset we were initially working with had a row for every person who died in the US from 1980 to 2014-- over 80 million rows. Each row tells you the sex, race, age, and county of residence of the decedent. It then goes on to list the *underlying* cause of death, and up to 20 *additional* causes of death. 

Let's pause here for some definitions. The medical field fully acknowledges that people often have multiple illnesses when they die, and that each of those illnesses may have contributed to their death. However, it is required that everyone who dies in the US be assigned a single **underlying** cause of death-- that is, the condition that tipped the first domino that led to an individuals' demise. For example, if you die due to an infection, but you only acquired that infection because your AIDS suppressed your immune system, your *underlying* cause of death should be HIV/AIDS, and whatever infection killed you should be listed as one of the other causes on the "multiple cause" list. For the purpose of the US counties analysis, we considered only the underlying cause, though there is work underway to incorporate information from other causes on the multiple cause list. 

As several of you noted, the determination of "underlying cause" is often not straightforward. If an individual struggled with both mental disorders and substance abuse for years before his/her death, 
















